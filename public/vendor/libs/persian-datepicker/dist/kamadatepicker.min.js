function kamaDatepicker(t,e){if(-1===["string","object"].indexOf(typeof t)||"object"==typeof t&&null===t||"strinf"==typeof t&&0===t.length){console.error("kamadatepicker error: input ID is not an object, string or is an empty strong!");return}var o,a,n,i,d,r,l,s,c,_,p,u=e||{},f=!1,g=!1,y=["٠","١","٢","٣","۴","۵","۶","٧","٨","٩","١٠","١١","١٢","١٣","١۴","١۵","١۶","١٧","١٨","١٩","٢٠","٢١","٢٢","٢٣","٢۴","٢۵","٢۶","٢٧","٢٨","٢٩","٣٠","٣١","٣٢",];u.placeholder=void 0!==u.placeholder?u.placeholder:"",u.twodigit=void 0===u.twodigit||u.twodigit,u.closeAfterSelect=void 0===u.closeAfterSelect||u.closeAfterSelect,u.nextButtonIcon=void 0!==u.nextButtonIcon&&u.nextButtonIcon,u.previousButtonIcon=void 0!==u.previousButtonIcon&&u.previousButtonIcon,u.buttonsColor=void 0!==u.buttonsColor&&u.buttonsColor,u.forceFarsiDigits=void 0!==u.forceFarsiDigits&&u.forceFarsiDigits,u.markToday=void 0!==u.markToday&&u.markToday,u.markHolidays=void 0!==u.markHolidays&&u.markHolidays,u.highlightSelectedDay=void 0!==u.highlightSelectedDay&&u.highlightSelectedDay,u.sync=void 0!==u.sync&&u.sync,u.gotoToday=void 0!==u.gotoToday&&u.gotoToday,u.pastYearsCount=isNaN(u.pastYearsCount)?95:u.pastYearsCount,u.futureYearsCount=isNaN(u.futureYearsCount)?6:u.futureYearsCount,u.holidays=u.holidays||[{month:1,day:1},{month:1,day:2},{month:1,day:3},{month:1,day:4},{month:1,day:12},{month:1,day:13},{month:3,day:14},{month:3,day:15},{month:11,day:22},{month:12,day:29},],u.disableHolidays=void 0!==u.disableHolidays&&u.disableHolidays,"string"==typeof t?p=$("#"+t):(p=$(t),t=function t(){var e,o,a;for(a=0,e="";a<32;a++)(8==a||12==a||16==a||20==a)&&(e+="-"),e+=o=Math.floor(16*Math.random()).toString(16).toUpperCase();return e}()),void 0===p.attr("placeholder")&&p.attr("placeholder",u.placeholder),p.wrap("<div id='bd-root-"+t+"' style='position: relative;'></div>"),p.after("<div id='bd-main-"+t+"' class='bd-main bd-hide' style='position: absolute; direction: rtl;'></div>");var v=$("#bd-main-"+t);v.append("<div class='bd-calendar'></div>");var b=v.find(".bd-calendar");b.append("<div class='bd-title'></div>");var h=b.find(".bd-title");b.append("<table class='bd-table' dir='rtl' cellspacing='0' cellpadding='0'></table>"),u.swapNextPrev?h.append("<button id='bd-prev-"+t+"' class='bd-prev' type='button' title='ماه قبلی' data-toggle='tooltip'><span>قبلی</span></button>"):h.append("<button id='bd-next-"+t+"' class='bd-next' type='button' title='ماه بعدی' data-toggle='tooltip'><span>بعدی</span></button>"),h.append("<div class='bd-dropdown'></div><div class='bd-dropdown'></div>"),h.find(".bd-dropdown:nth-child(2)").append("<select id='bd-month-"+t+"' class='bd-month'></select>"),h.find(".bd-dropdown:nth-child(3)").append("<select id='bd-year-"+t+"' class='bd-year'></select>"),u.swapNextPrev?h.append("<button id='bd-next-"+t+"' class='bd-next' type='button' title='ماه بعدی' data-toggle='tooltip'><span>بعدی</span></button>"):h.append("<button id='bd-prev-"+t+"' class='bd-prev' type='button' title='ماه قبلی' data-toggle='tooltip'><span>قبلی</span></button>");var m=$("#bd-next-"+t);u.nextButtonIcon&&(m.find("span").css("display","none"),-1!==u.nextButtonIcon.indexOf(".")?m.css("background-image","url("+u.nextButtonIcon+")"):m.addClass(u.nextButtonIcon));var x=$("#bd-month-"+t);$.each({1:"حمل",2:"ثور",3:"جوزا",4:"سرطان",5:"اسد",6:"سنبله",7:"میزان",8:"عقرت",9:"قوس",10:"جدی",11:"دلو",12:"حوت"},function(t,e){x.append($("<option></option>").attr("value",t).text(e))});var C=$("#bd-year-"+t),k=$("#bd-prev-"+t);u.nextButtonIcon&&(k.find("span").css("display","none"),-1!==u.previousButtonIcon.indexOf(".")?k.css("background-image","url("+u.previousButtonIcon+")"):k.addClass(u.previousButtonIcon)),u.buttonsColor&&(m.css("color",u.buttonsColor),m.find("span").css("color",u.buttonsColor),k.css("color",u.buttonsColor),k.find("span").css("color",u.buttonsColor)),b.find(".bd-table").append("<thead><tr></tr></thead>"),$.each({شنبه:"ش",یکشنبه:"ی",دوشنبه:"د","سه شنبه":"س",چهارشنبه:"چ","پنج شنبه":"پ",جمعه:"ج"},function(t,e){b.find(".bd-table thead tr").append($("<th></th>").text(e))}),b.find(".bd-table").append("<tbody id='bd-table-days-"+t+"' class='bd-table-days'></tbody>");var H=$("#bd-table-days-"+t);if(u.gotoToday){b.append("<div class='bd-goto-today'>برو به امروز</div>");var I=b.find(".bd-goto-today")}function D(){var e,o,a;let n=document.querySelector(`#bd-main-${t}`),i=1===p.length?p[0]:p;if(i.offsetHeight,n.offsetHeight,"top"===u.position)n.style.top=`${-1*n.offsetHeight}px`;else if("auto"===u.position){let d;u.parentId&&(d=document.querySelector(`#${u.parentId}`)),u.parentId&&d||(d=document.querySelector(`#bd-root-${t}`));let r=function t(e,o){let a=l(e),n=l(o);return Math.abs(a.y-n.y)}(d,i);d.offsetHeight-r-(i.offsetHeight+n.offsetHeight)>0?n.style.top=`${i.offsetHeight}px`:r-(i.offsetHeight+n.offsetHeight)>0?n.style.top=`${-1*n.offsetHeight}px`:n.style.top=`${i.offsetHeight}px`}else n.style.top=`${i.offsetHeight}px`;function l(t){let{top:e,left:o}=t.getBoundingClientRect();return{x:o,y:e}}(e=n,o=e.getBoundingClientRect(),a={},a.top=o.top<0,a.left=o.left<0,a.bottom=o.bottom>(window.innerHeight||document.documentElement.clientHeight),a.right=o.right>(window.innerWidth||document.documentElement.clientWidth),a.any=a.top||a.left||a.bottom||a.right,a.all=a.top&&a.left&&a.bottom&&a.right,a).left&&(n.style.left=0)}p.on("focus",function(){v.removeClass("bd-hide"),u.sync&&!1===g&&(q(),g=!0),D()}).on("blur",function(){!1==f?(v.addClass("bd-hide"),g=!1):(f=!1,p.focus(),event.preventDefault())}),v.on("mousedown",function(t){f=!0}),x.on("change",function(){s=R(o,a=parseInt(this.value)),U(s,l=M(o,a)),D()}),C.on("change",function(){s=R(o=parseInt(this.value),a),U(s,l=M(o,a)),D()});var w=[31,28,31,30,31,30,31,31,30,31,30,31],B=[31,31,31,31,31,31,30,30,30,30,30,29];function S(t,e,o){return function t(e){var o,a,n,i=O(e).gy,d=i-621,r=j(d),l=T(i,3,r.march);if((n=e-l)>=0){if(185>=n)return{jy:d,jm:a=1+function(t,e){return~~(t/e)}(n,31),jd:o=A(n,31)+1};n-=186}else d-=1,n+=179,1===r.leap&&(n+=1);return{jy:d,jm:a=7+function(t,e){return~~(t/e)}(n,30),jd:o=A(n,30)+1}}(T(t,e,o))}function Y(t,e,o){var a,n,i;return t>=-61&&3177>=t&&e>=1&&12>=e&&o>=1&&o<=(a=t,n=e,6>=n?31:11>=n?30:0===j(i=a).leap?30:29)}function j(t){var e,o,a,n,i,d,r,l=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178,],s=l.length,c=t+621,_=-14,p=l[0];if(p>t||t>=l[s-1])throw Error("Invalid Jalaali year "+t);for(r=1;s>r&&(o=(e=l[r])-p,!(e>t));r+=1){var u,f,g=33,y=4;_=_+8*(u=o,~~(u/g))+(f=A(o,33),~~(f/y)),p=e}var v,b,h,m,x,C,k=33,H=4,I=4,D=100,w=4,B=33;return _=_+8*(v=d=t-p,~~(v/k))+(b=A(d,33)+3,~~(b/H)),4===A(o,33)&&o-d==4&&(_+=1),i=20+_-(n=(h=c,~~(h/I)-(x=3*(m=c,~~(m/D)+1),~~(x/w))-150)),6>o-d&&(d=d-o+33*(C=o+4,~~(C/B))),-1===(a=A(A(d+1,33)-1,4))&&(a=4),{leap:a,gy:c,march:i}}function T(t,e,o){var a,n,i,d,r,l,s=6,c=4,_=5,p=(n=1461*(t+(a=e-8,~~(a/s))+100100),~~(n/c)+(i=153*A(e+9,12)+2,~~(i/_))+o-34840408),u=6,f=100,g=4;return p-(l=3*(r=t+100100+(d=e-8,~~(d/u)),~~(r/f)),~~(l/g))+752}function O(t){var e,o,a,n,i,d,r,l,s,c,_,p,u=146097,f=4,g=4,y=5,v=153,b=1461,h=6;return o=5*(l=A(e=(e=4*t+139361631)+4*(r=3*(d=4*t+183187720,~~(d/u)),~~(r/f))-3908,1461),~~(l/g))+308,a=(s=A(o,153),~~(s/y)+1),n=A((c=o,~~(c/v)),12)+1,{gy:i=(_=e,~~(_/b)-100100+(p=8-n,~~(p/h))),gm:n,gd:a}}function F(t,e){return~~(t/e)}function A(t,e){return t-~~(t/e)*e}var q=function(){var t=E(p.val());""!==t&&(t=t.split("/"),x.val(parseInt(t[1])),x.trigger("change"),C.val(parseInt(t[0])),C.trigger("change"),u.highlightSelectedDay&&(v.find(".bd-selected-day").removeClass("bd-selected-day"),v.find(".day-"+parseInt(t[2])).addClass("bd-selected-day")))},E=function(t){return""===t?"":((t=t.split("/"))[1].length<2&&t[1]<10&&(t[1]="0"+t[1]),t[2].length<2&&t[2]<10&&(t[2]="0"+t[2]),t=t.join("/"))},N=function(t){var e;return t<6?t+1:0},P=function(t){var e;return t>1243&&t<1473?1==(e=t%33)||5==e||9==e||13==e||17==e||22==e||26==e||30==e:"unknown"},R=function(t,e){return e<7?31:e<12?30:P(t)?30:29};_=function t(e,o,a){e=parseInt(e),o=parseInt(o),a=parseInt(a);for(var n=e-1600,i=o-1,d=a-1,r=365*n+parseInt((n+3)/4)-parseInt((n+99)/100)+parseInt((n+399)/400),l=0;i>l;++l)r+=w[l];i>1&&(n%4==0&&n%100!=0||n%400==0)&&++r;var s,c=(r+=d)-79,_=979+33*parseInt(c/12053)+4*parseInt((c%=12053)/1461);(c%=1461)>=366&&(_+=parseInt((c-1)/365),c=(c-1)%365);for(var l=0;11>l&&c>=B[l];++l)c-=B[l];return[_,l+1,c+1]}((c=new Date).getFullYear(),c.getMonth()+1,c.getDate());var W=[];for(let J=0;J<3;J++)W[J]=_[J];i=_[0],d=_[1],r=_[2],o=W[0],a=W[1],n=W[2],x.val(a),function(t){C.find("option").remove();for(let e=0;e<u.pastYearsCount+u.futureYearsCount;e++){var o=t-u.pastYearsCount+e+"";if(u.forceFarsiDigits)for(var a=0;a<10;a++){var n=RegExp(a,"g");o=o.replace(n,y[a])}C.append($("<option>",{value:t-u.pastYearsCount+e,text:o}))}}(o),C.val(o),s=R(o,a);var M=function(t,e){var o,a,n,i,d,r,l,s=1,c=(r=t,l=e,O((o=r,a=l,n=j(o),d=7,T(n.gy,3,n.march)+31*(a-1)-(i=a,~~(i/d)*(a-7))+1-1)));return c=new Date(c.gy+"/"+c.gm+"/"+c.gd),N(c.getDay())};l=M(o,a);var U=function(e,n){H.empty();for(var l=1,s=1;l<=e;){H.append($("<tr>",{class:"tr-"+s}));for(let c=0;c<7;c++){if(1==l)for(var _=0;_<n;)$("#bd-table-days-"+t+" .tr-1").append($("<td>",{class:"bd-empty-cell"})),_++,c++;if(c<7&&l<=e){var f='<td><button class="day day-'+l+'" type="button">'+(u.forceFarsiDigits?y[l]:l)+"</button></td>";if(u.markToday&&l==r&&d==a&&i==o){var g=f.indexOf("day day-");f=f.slice(0,g)+" bd-today "+f.slice(g)}if(u.markHolidays){let b=!1;if(6==c)b=!0;else for(let h=0;h<u.holidays.length;h++){let m=u.holidays[h];if((m.year&&o===m.year||!m.year)&&l===m.day&&a===m.month){b=!0;break}}if(b){let x=f.indexOf("day day-");if(f=f.slice(0,x)+" bd-holiday "+f.slice(x),u.disableHolidays){let C=f.indexOf('type="button"');f=f.slice(0,C)+" disabled "+f.slice(C)}}}$("#bd-table-days-"+t+" .tr-"+s).append(f),l++}}s++}if(u.highlightSelectedDay){var k=p.val();(k=k.split("/"))[0]==o&&k[1]==a&&(v.find(".bd-selected-day").removeClass("bd-selected-day"),v.find(".day-"+parseInt(k[2])).addClass("bd-selected-day"))}};p.parent().on("click","button.day",function(){var t=o+"/"+a+"/"+$(this).attr("class").split(" ")[$(this).attr("class").split(" ").indexOf("day")+1].split("-")[1];u.twodigit&&(t=E(t)),p.val(t),p.trigger("change"),u.closeAfterSelect&&(f=!1,p.trigger("blur")),u.highlightSelectedDay&&(v.find(".bd-selected-day").removeClass("bd-selected-day"),$(this).addClass("bd-selected-day"))}),m.on("click",function(){12>x.val()?(x.val(parseInt(x.val())+1),x.trigger("change")):C.val()!=C[0].options[C[0].options.length-1].value&&(x.val(1),x.trigger("change"),C.val(parseInt(C.val())+1),C.trigger("change"))}),k.on("click",function(){x.val()>1?(x.val(parseInt(x.val())-1),x.trigger("change")):C.val()!=C[0].options[0].value&&(x.val(12),x.trigger("change"),C.val(parseInt(C.val())-1),C.trigger("change"))}),u.gotoToday&&I.on("click",function(){x.val(d),x.trigger("change"),C.val(i),C.trigger("change")}),U(s,l),"function"==typeof $().modal&&$('[data-toggle="tooltip"]').tooltip()}window.kamaDatepicker=kamaDatepicker;